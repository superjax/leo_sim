<launch>
  <!-- Load Global Parameters for Leo -->
  <rosparam command="load" file="$(find leo_sim)/param/leo.yaml"/>

  <!-- Launch Gazebo Simulator -->
  <include file="$(find rosflight_sim)/launch/base.launch">
    <arg name="mav_name" value="leo"/>
    <arg name="color" value="Blue"/>
    <arg name="x" value="0"/>
    <arg name="y" value="0"/>
    <arg name="z" value="0.1"/>
    <arg name="yaw" value="0"/>
    <arg name="paused" value="false"/>
    <arg name="gui" value="true"/>
    <arg name="verbose" value="true"/>
    <arg name="debug" value="false"/>
    <arg name="xacro_file" value="$(find leo_sim)/xacro/leo.urdf.xacro"/>
    <arg name="param_file" value="$(find leo_sim)/param/leo.yaml"/>
  </include>

  <!-- ROSflight_IO -->
  <node name="rosflight_io" pkg="rosflight" type="rosflight_io">
    <param name="udp" value="true"/>
  </node>

  <!-- RC Simulation -->
  <node name="rc_joy" pkg="rosflight_utils" type="rc_joy"/>

  <!--Estimation-->
  <node name="start_trigger" pkg="rmekf" type="start_trigger.py"/>
  <node name="rmekf"         pkg="rmekf" type="rmekf_node" output="screen">
    <rosparam command="load" file="$(find rmekf)/params/estimator.yaml"/>
    <remap from="altimeter" to="sonar"/>
  </node>

  <!--Control-->
  <rosparam command="load" file="$(find rotor_controller)/param/gains/pid.yaml"/>
  <node name="pid_controller"      pkg="rotor_controller"    type="rotor_controller_pid"  output="screen"/>

</launch>
